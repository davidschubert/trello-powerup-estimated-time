<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Estimated Time Power-Up</title>
        <!-- Trello Power-Up Client Library -->
        <script src="https://p.trellocdn.com/power-up.min.js"></script>
    </head>
    <body>
        <script>
            var Promise = TrelloPowerUp.Promise;

            TrelloPowerUp.initialize({
                // Adds a button in the card detail view
                "card-buttons": function (t, options) {
                    return [
                        {
                            icon: "https://example.com/path/to/icon.png", // Replace this with your own HTTPS icon URL
                            text: "Set Estimated Time",
                            callback: function (t) {
                                return t.popup({
                                    title: "Estimated Time",
                                    url: "./popup.html", // Relative path to the popup
                                    height: 150, // Height of the popup in pixels
                                });
                            },
                        },
                    ];
                },
                // Shows a badge with the estimated time on the card
                "card-detail-badges": function (t, options) {
                    return t
                        .get("card", "private", "estimatedTime")
                        .then(function (estimatedTime) {
                            if (!estimatedTime) {
                                return [];
                            }
                            return [
                                {
                                    title: "Estimated Time",
                                    text: estimatedTime + "h", // For example, "2h"
                                    color: "blue",
                                },
                            ];
                        });
                },
            });
        </script>
    </body>
</html>
